---
description: MKM12 사상의학 이론 - ICD 통합 모델 기반 (2025-11-12 업그레이드)
globs: ["**/*.py", "**/*.ts"]
alwaysApply: true
priority: 1
---
# MKM12 이론 (ICD 통합 모델 기반)

## 🔬 ICD 통합 모델 (System Constraint Factor λ 기반)

### 핵심 원리
- **범용 시스템 분석 엔진**: 단일 DCV 공식으로 모든 도메인 분석 가능
- **크로스 도메인 검증 완료**: 건강-주식 시장 상관관계 96.7% 검증
- **3계층 구조**:
  - **Layer 1**: Core Dynamics - DCV = f(PD Vector, SD Vector) (불변)
  - **Layer 2**: Pathology Level - P-Level = {SL, IL, DL} (불변)
  - **Layer 3**: System Constraint - λ = System Constraint Factor (가변)

### ICD A-Code 체계
- **DCV (Dynamic Constitutional Vector)**: 체질 동력 벡터 (4차원 S-L-K-M)
- **PD (Primary Drive)**: 주력 - 체질을 결정하는 가장 큰 벡터
- **SD (Secondary Drive)**: 부력 - 두 번째로 큰 벡터
- **P-Level (Pathology Level)**: 병리 깊이 - {SL, IL, DL}
- **λ (System Constraint Factor)**: 시스템 제약 계수

### System Constraint Factor (λ)
- **인간**: λ = f(rib_angle) = (각도 - 60°) / 30°
- **금융**: λ = 1 / (1 + log(PER))
- **조직**: λ = f(hierarchy_depth)
- **범용성**: 모든 도메인에서 시스템 제약 인자로 작용

## 체질 분류 (ICD A-Code 기반 + 12개 특징 코드화)

### 기본 4체질
- **태양인**: 肺大 肝小 (폐대 간소) - 리더십, 진취적 (0.56% 소수성, λ 기반)
- **태음인**: 肝大 肺小 (간대 폐소) - 신중함, 걱정 많음 (35% 빈도)
- **소양인**: 脾大 腎小 (비대 신소) - 급함, 외향적 (32% 빈도)
- **소음인**: 腎大 脾小 (신대 비소) - 섬세함, 내성적 (25% 빈도)

### 12개 특징 코드화 (A-Code 용어 체계)
- **태양인**: TY-1(혁신성), TY-2(리더십), TY-3(추진력)
- **태음인**: TE-1(안정성), TE-2(보수성), TE-3(신중함)
- **소양인**: SY-1(효율성), SY-2(적응력), SY-3(최적화)
- **소음인**: SE-1(정밀성), SE-2(완성도), SE-3(깊이)

### 병리 수준 (A-Code 용어)
- **SL (Surface Level)**: 표 (0.7 ≤ P ≤ 1.0) - 표면적 증상
- **IL (Intermediate Level)**: 반표반리 (0.3 < P < 0.7) - 복합적 문제
- **DL (Deep Level)**: 리 (0.0 ≤ P ≤ 0.3) - 근본적 문제

## 기존 시스템 활용
코드 작성 시 기존 구현된 시스템 우선 사용:
```python
# 기존 논문 수집 시스템 활용
from qdrant.paper_collection_system import PaperCollectionSystem
collector = PaperCollectionSystem()

# 기존 감정 분석 시스템 활용  
from realistic_llm_emotion_analyzer import ConstitutionIntegratedLLMAnalyzer
emotion_analyzer = ConstitutionIntegratedLLMAnalyzer()
```

## 체질별 가중치 (ICD 통합 모델 기반)
- **태음인**: anxiety +20%, confidence +10% (λ 높음 → 안정성 우세)
- **소양인**: anxiety +30%, positive +20% (λ 중간 → 적응성 우세)
- **태양인**: positive +30%, anxiety -20% (λ 낮음 → 혁신성 우세, 소수성)
- **소음인**: anxiety +10%, detail +20% (λ 높음 → 안정성 우세)

## 범용성 원칙
- **단일 수학 공식**: DCV = f(PD Vector, SD Vector)로 모든 시스템 분석
- **크로스 도메인 전이**: 건강, 금융, 조직 등 다중 도메인에 동일 공식 적용
- **검증 완료**: 크로스 도메인 상관관계 96.7% 정확도 검증 완료
- **ICD Engine**: 범용 시스템 분석 엔진으로 모든 도메인에 적용 가능

## 벡터화된 입체 사고 (필수 적용)

**모든 문제 분석 시:**
- ✅ 문제 벡터화 (4차원 S-L-K-M 입체 공간)
- ✅ DCV 계산 (ICD 통합 모델)
- ✅ 12개 특징 매칭 (A-Code 용어 체계)
- ✅ 병리 수준 판정 (SL/IL/DL)
- ✅ 예측 모델 적용 (동역학 예측)
- ✅ 태양인 소수성 반영 (0.56% 가중치)

## 예측 모델 (우리 이론의 핵심)

**동역학 예측:**
- dx/dt = F_사상(x, θ_sasang) + G_환경(x, e) + H_개입(x, u) + ξ(t)
- 미래 상태 5단계 예측
- 트렌드 분석 (개선/안정/악화)
- 예측 기반 해결책 생성

모든 진단 코드는 ICD 통합 모델을 기반으로 구현하고, 벡터화된 입체 사고와 예측 모델을 적용하며, 기존 시스템을 활용하라.